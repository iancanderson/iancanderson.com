@tailwind base;
@tailwind components;
@tailwind utilities;

/* Brutalist theme tokens (palettes) */
/* Default (Theme 1): warm off-white + red/cyan accents */
:root,
.theme-brutal-1 {
  --brutal-bg: #fffbe6;
  --brutal-fg: #111827;
  --brutal-accent: #ff3b3b;
  --brutal-accent-2: #00a3ff;
  --brutal-card: #ffffff;
  --brutal-border: #000000;
  --brutal-shadow: #000000;
  --brutal-tag-bg: #fde68a; /* amber-300 */
  --brutal-tag-fg: #111827;
  /* Accessible, fun link colors (violet) */
  --brutal-link: #6d28d9; /* violet-700 */
  --brutal-link-hover: #7c3aed; /* violet-600 */
}

/* Theme 2: lime wash + sky/red accents */
.theme-brutal-2 {
  --brutal-bg: #ecfccb; /* lime-100 */
  --brutal-fg: #0f172a; /* slate-900 */
  --brutal-accent: #0ea5e9; /* sky-500 */
  --brutal-accent-2: #ef4444; /* red-500 */
  --brutal-card: #ffffff;
  --brutal-border: #000000;
  --brutal-shadow: #000000;
  --brutal-tag-bg: #fef08a; /* yellow-300 */
  --brutal-tag-fg: #0f172a;
  --brutal-link: #6d28d9; /* keep link consistent across themes */
  --brutal-link-hover: #7c3aed;
}

/* Theme 3: slate wash + green/amber accents */
.theme-brutal-3 {
  --brutal-bg: #f1f5f9; /* slate-100 */
  --brutal-fg: #020617; /* slate-950 */
  --brutal-accent: #22c55e; /* green-500 */
  --brutal-accent-2: #f59e0b; /* amber-500 */
  --brutal-card: #ffffff;
  --brutal-border: #000000;
  --brutal-shadow: #000000;
  --brutal-tag-bg: #d1fae5; /* emerald-100 */
  --brutal-tag-fg: #022c22;
  --brutal-link: #6d28d9;
  --brutal-link-hover: #7c3aed;
}

/* Theme 4 (dark): near-black + yellow/cyan accents */
.theme-brutal-dark {
  --brutal-bg: #0a0a0a;
  --brutal-fg: #f5f5f5;
  --brutal-accent: #ffcc00;
  --brutal-accent-2: #00e5ff;
  --brutal-card: #161616; /* lighter than bg for contrast */
  --brutal-border: #ffffff; /* visible borders */
  --brutal-shadow: #ffffff;
  --brutal-tag-bg: #222222;
  --brutal-tag-fg: #f5f5f5;
  --brutal-link: #a78bfa; /* violet-300 for dark bg */
  --brutal-link-hover: #c4b5fd; /* violet-200 */
}

/* WEIRD THEME â€” neon, playful, accessible */
.theme-weird {
  --brutal-bg: radial-gradient(1200px 800px at 10% -10%, #ffedd5 0%, transparent 40%),
               radial-gradient(900px 700px at 110% 10%, #dbeafe 0%, transparent 42%),
               radial-gradient(700px 500px at 30% 120%, #fce7f3 0%, transparent 45%),
               #fffdf5;
  --brutal-fg: #0f172a; /* slate-900 */
  --brutal-accent: #ef4444; /* red-500 */
  --brutal-accent-2: #22c55e; /* green-500 */
  --brutal-card: #ffffff;
  --brutal-border: #111827;
  --brutal-shadow: #111827;
  --brutal-tag-bg: #fef08a; /* yellow-300 */
  --brutal-tag-fg: #111827;
  --brutal-link: #6d28d9; /* violet-700 */
  --brutal-link-hover: #7c3aed; /* violet-600 */
}

/* Funky utilities for weird theme */
.weird-bg {
  position: relative;
  overflow: hidden;
}
.weird-bg:before,
.weird-bg:after {
  content: "";
  position: absolute;
  inset: -25%;
  background: repeating-conic-gradient(from 0deg, rgba(255,99,132,.06) 0 20deg, transparent 20deg 40deg),
              radial-gradient(800px 600px at 120% 10%, rgba(99,102,241,.08), transparent 55%);
  animation: spin-slow 60s linear infinite;
}
.weird-bg:after { animation-direction: reverse; opacity: .7; }

@keyframes spin-slow { to { transform: rotate(360deg); } }

.glitch {
  position: relative;
  text-shadow: 1px 0 0 #ef4444, -1px 0 0 #22c55e;
}
.glitch:hover { animation: wiggle .18s ease-in-out 6; }
@keyframes wiggle { 50% { transform: rotate(-0.6deg) translateY(-1px); } }

.neon-chip:hover {
  box-shadow: 0 0 0 2px rgba(var(--chip-color-rgb,0,0,0), .35), 0 0 24px rgba(var(--chip-color-rgb,0,0,0), .25);
}

/* Weird card frames (slight tilt, pattern fill) */
.weird-card {
  position: relative;
  transform: rotate(-0.4deg);
  transition: transform 140ms ease-in-out, box-shadow 140ms ease-in-out;
  background:
    repeating-linear-gradient(135deg, rgba(2,6,23,0.04) 0 8px, transparent 8px 16px),
    var(--brutal-card);
}
.weird-card:hover { transform: rotate(0deg); box-shadow: 6px 6px 0 0 var(--brutal-shadow); }
.weird-card:after {
  content: "";
  position: absolute;
  inset: 0;
  border: 3px dashed rgba(15, 23, 42, 0.18);
  pointer-events: none;
}

/* Scroll jiggle: cards wiggle while scrolling, then settle (intense + randomized) */
@keyframes jiggle {
  0%   { transform: rotate(calc(-1 * var(--j-rot, 1.2deg))) translateY(0); }
  25%  { transform: rotate(calc( 0.5 * var(--j-rot, 1.2deg))) translateY(calc(-0.5 * var(--j-amp, 3px))); }
  50%  { transform: rotate(var(--j-rot, 1.2deg)) translateY(calc(-1 * var(--j-amp, 3px))); }
  75%  { transform: rotate(calc(-0.3 * var(--j-rot, 1.2deg))) translateY(calc(-0.25 * var(--j-amp, 3px))); }
  100% { transform: rotate(calc(-1 * var(--j-rot, 1.2deg))) translateY(0); }
}
.is-scrolling .weird-card {
  animation: jiggle var(--j-duration, 240ms) ease-in-out infinite;
  animation-delay: var(--j-delay, 0ms);
}

/* Marquee scroller */
.marquee { position: relative; overflow: hidden; white-space: nowrap; }
.marquee span { display: inline-block; padding-left: 100%; animation: marquee 18s linear infinite; }
@keyframes marquee { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }

/* Utilities */
.brutal-border { border: 4px solid var(--brutal-border); box-shadow: 6px 6px 0 0 var(--brutal-shadow); }
.brutal-button {
  @apply brutal-border bg-[color:var(--brutal-accent)] text-white px-4 py-2 font-bold uppercase tracking-wide;
}
.brutal-link { @apply underline decoration-4; }
.brutal-link { text-decoration-color: var(--brutal-link); }
.brutal-link:hover { text-decoration-color: var(--brutal-link-hover); }
.brutal-tag { display:inline-block; margin-right:0.5rem; margin-bottom:0.5rem; padding:0.125rem 0.5rem; font-size:0.75rem; background: var(--brutal-tag-bg); color: var(--brutal-tag-fg); }

/* Fun chip for tag cloud */
.brutal-chip {
  border: 2px solid rgba(var(--chip-color-rgb, 0,0,0), 0.28); /* always show a subtle rectangle */
  transition: transform 60ms ease-in-out, box-shadow 60ms ease-in-out, border-color 60ms ease-in-out, background-color 60ms ease-in-out;
  will-change: transform, box-shadow, border-color, background-color;
}
.brutal-chip:hover {
  border-color: var(--brutal-border);
  box-shadow: 6px 6px 0 0 var(--brutal-shadow);
  transform: translate(-2px, -2px) rotate(-0.5deg);
  background-color: rgba(var(--chip-color-rgb, 0,0,0), 0.12);
}

/* Active state (same look as hover, but persistent) */
.brutal-chip.is-active {
  border-color: var(--brutal-border);
  box-shadow: 6px 6px 0 0 var(--brutal-shadow);
  transform: translate(-2px, -2px) rotate(-0.5deg);
  background-color: rgba(var(--chip-color-rgb, 0,0,0), 0.12);
}
.brutal-chip .chip-emoji { transition: transform 80ms ease-in-out; }
.brutal-chip:hover .chip-emoji { transform: translateY(-1px) rotate(-6deg) scale(1.07); }

/* Per-tag accent colors (RGB) for chips */
.chip-software { --chip-color-rgb: 59, 130, 246; } /* blue-500 */
.chip-investing { --chip-color-rgb: 34, 197, 94; } /* green-500 */
.chip-music { --chip-color-rgb: 236, 72, 153; } /* pink-500 */
.chip-video { --chip-color-rgb: 239, 68, 68; } /* red-500 */
.chip-homebrewing { --chip-color-rgb: 245, 158, 11; } /* amber-500 */
.chip-podcast { --chip-color-rgb: 139, 92, 246; } /* violet-500 */
.chip-katies-40th { --chip-color-rgb: 217, 70, 239; } /* fuchsia-500 */

@media (prefers-reduced-motion: reduce) {
  .brutal-chip, .brutal-chip .chip-emoji { transition: none !important; }
  .brutal-chip:hover { transform: none; box-shadow: none; }
  .brutal-chip:hover .chip-emoji { transform: none; }
}

/* Base colors & links */
body {
  background: var(--brutal-bg);
  color: var(--brutal-fg);
}
/* Ensure default links have sufficient contrast on all themes */
a { color: var(--brutal-link); }
a:hover { color: var(--brutal-link-hover); }

/* Keep chips using foreground color, not link color */
.brutal-chip { color: var(--brutal-fg); }
